Advanced Technical Implementation Prompt"I am experiencing a synchronization gap where the 'ONBOARD' status from the eSIM Access provider is not triggering a transition to the 'activated' state in our local purchasedEsims table. Please apply the following technical fixes:1. Update isEsimActivated Helper Function:Modify the status check to explicitly include 'ONBOARD' and 'ENABLED' in the ACTIVATION_STATUSES array.Logic Change: If providerStatus is 'ONBOARD', the function must return true even if webhookData.installationTime and webhookData.activateTime are falsy. We need to treat 'ONBOARD' as a definitive 'Activated' signal to unlock the UI for the user.2. Implement Safe Timestamp Fallback for Employee Plan Update:Locate the logic that updates schema.employees. Currently, it relies on content.activateTime.Fix: Refactor the activationDate assignment. If content.activateTime or content.installationTime are null or the string 'null', default to new Date().Calculation: Recalculate endDate using this fallback activationDate plus plan.validity. This ensures the employee's plan record is never created with a null start date, which breaks the frontend countdown.3. Database & SSE Consistency:Ensure that when the status is updated to 'activated', the metadata field in purchasedEsims is merged correctly (using the spread operator) to preserve existing metadata while adding syncedAt, providerStatus, and viaWebhook: true.Verify that emitEvent sends the payload with newStatus: "activated" and includes the dataUsed (converted via parseFloat(orderUsage) / (1024 ** 3)).4. Payload Debugging & Error Handling:Add a console.dir(req.body, { depth: null }) at the top of the route to inspect the full nested structure of the provider's payload.Wrap the PlanDepletionService call in a more robust try-catch block to ensure that if data usage calculation fails, the main status update still commits to the database.5. Unit Consistency:Standardize all byte-to-GB conversions to use the binary constant 1073741824 ($1024^3$) to match the precision used in the EsimAccessService polling logic."Technical Breakdown of the FixThe Date Fallback: Many providers send 'ONBOARD' when the profile is ready but not yet "attached" to a tower. By forcing a timestamp, you allow your app to start the billing/validity cycle immediately, matching the user's expectation.The metadata Spread: Prevents accidental deletion of the original activation codes or QR URLs stored in the metadata during the status update.The Binary Constant: Prevents "ghost data" issues where the app shows 0.99GB used while the provider thinks it's 1GB, which often prevents auto-renewal from triggering.